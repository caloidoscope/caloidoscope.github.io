<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>FRIGORA - Home</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <!-- Font Awesome icons (free version)-->
    <script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js" crossorigin="anonymous"></script>
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="../../css/styles.css" rel="stylesheet" />
    <link href="../../css/audio.css" rel="stylesheet" />
</head>
<body id="page-top">
    <!-- Navigation-->
    <nav class="navbar navbar-default navbar-dark fixed-top navbar-shrink" id="mainNav">
        <div class="container">
            <a class="navbar-brand" href="../../"><img src="../../assets/img/header-logo.png" alt="..." /></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                Menu
                <i class="fas fa-bars ms-1"></i>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav text-uppercase ms-auto py-4 py-lg-0">
                    <li class="nav-item"><a class="nav-link" href="../../#packages">Packages</a></li>
                    <li class="nav-item"><a class="nav-link" href="../../#testimonials">Testimonials</a></li>
                    <li class="nav-item"><a class="nav-link" href="../../#vocalists">Vocalists</a></li>
                    <li class="nav-item"><a class="nav-link" href="../../#arrangements">Arrangements</a></li>
                    <li class="nav-item"><a class="nav-link" href="../../#team">Contact</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <section class="page-section no-pad-bottom">
        <div class="container text-center my-3 mw-100 no-pad">
            <h1 class="my-2">VOCALISTS</h1>
            <div class="row mx-auto my-auto justify-content-center">
                <div id="recipeCarousel" class="carousel slide no-pad" data-bs-ride="carousel">
                    <div id="carousel-container" class="carousel-inner">
                    </div>
                    <a class="carousel-control-prev bg-transparent w-aut" href="#recipeCarousel" role="button" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    </a>
                    <a class="carousel-control-next bg-transparent w-aut" href="#recipeCarousel" role="button" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    </a>
                </div>
            </div>
        </div>
    </section>
    <section class="page-section">
        <div class="container">
            <div class="text-center"> 
                <div class="row text-center">
                    <div class="col-lg-12"><h4>BOOK NOW</h4>
                        <div class="row text-center">
                            <div class="col-lg-12 col-md-12 text-right">
                                frigoracoustic@gmail.com â€¢ +63 917 824 5081
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <div class="portfolio-modal modal  fade" id="portfolioModal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class=" modal-dialog modal-xl mx-auto">
            <div class="modal-content">
                <div class="close-modal" data-bs-dismiss="modal"><img src="../../assets/img/close-icon.svg" alt="Close modal" onclick="onClickClose()"/></div>
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-lg-12">
                            <div class="modal-body">
                                <div class ="row text-center">
                                    <h2 id ="vocalist-name" class="text-uppercase">BURN</h2>
                                </div>
                                <div class ="row text-center">
                                    <div class ="col-md-4">
                                        <img id="vocalist-pic" class="img-fluid d-block mx-auto rounded-9 shadow-lg" src="../../assets/img/vocalists/BURN.jpg" alt="..." />
                                    </div>
                                    <div class ="col-md-8">
                                        <div class="music-container mb-5" id="music-container">
                                            <div class="music-info">
                                                <h6 id="title"></h6>
                                                <div class="progress-container" id="progress-container">
                                                    <div class="progress" id="progress"></div>
                                                </div>
                                                <h6 id="currTime"></h6>
                                            </div>
                                            
                                            <audio src="../../assets/songs/audio/bridal-march/Bawat Daan - Ebe Dancel.mp3" id="audio"></audio>
                                            <div class="img-container">
                                                <img src="../../assets/songs/img/logo.png" alt="music-cover" id="cover" />
                                            </div>
                                            <div class="navigation">
                                                <button id="prev" class="action-btn">
                                                    <i class="fas fa-backward ap"></i>
                                                </button>
                                                <button id="play" class="action-btn action-btn-big">
                                                    <i class="fas fa-play ap"></i>
                                                </button>
                                                <button id="next" class="action-btn">
                                                    <i class="fas fa-forward ap"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div id = "song-list" class=" card p-1 shadow-lg text-start">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script src="../../js/audio.js"></script>
    <script>
        onLoad();
        function onLoad(){
            fetch('../../assets/json/vocalists.json')
                .then(response => response.json())
                .then(data => {
                    console.log(data)
                    let result = ""
                    for (var i = 0; i < data.length; i++) {
                        const classNames = "carousel-item" + (i===0 ? " active" : "");
                        result = result +   `
                        <div class="${classNames}">
                            <div class="col-md-3">
                                <div class="card no-border">
                                    <div class="card-img">
                                        <a data-bs-toggle="modal" href="#portfolioModal">
                                            <img src="../../assets/img/vocalists/${data[i].name.toLowerCase()}.jpg" onclick="onClickVocals('${data[i].name}')" class="img-fluid">
                                            <div class="overlay-fix">${data[i].name.toUpperCase()}</div>
                                            <div class="overlay"><i class="fas fa-volume-up"></i> TAP/CLICK TO LISTEN</div>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>`;
                    }
                    document.getElementById('carousel-container').innerHTML = result
                })
                .catch(error => console.error(error))
                .finally(()=>{
                    let items = document.querySelectorAll('.carousel .carousel-item')
                    items.forEach((el) => {
                        const minPerSlide = 7
                        let next = el.nextElementSibling
                        for (var i=1; i<minPerSlide; i++) {
                            if (!next) {
                                // wrap carousel by using first child
                                next = items[0]
                            }
                            let cloneChild = next.cloneNode(true)
                            el.appendChild(cloneChild.children[0])
                            next = next.nextElementSibling
                        }
                    })
                });
        }

        function onClickVocals(vocalist){
            changeModalDetails(vocalist);
            fetch('../../assets/json/vocalists_songs.json')
                .then(response => response.json())
                .then(_data => {
                    const data=_data.filter(item => item.vocalist === vocalist);
                    initSongs(vocalist,data);
                    var result = ""
                    for (var i = 0; i < data.length; i++) {                        
                        const title = data[i].title + " by " + data[i].artist
                        const classNames = "p-1 song-item " + (i==0 ? "song-active" : "");
                        result = result + `<h6 id="song-${i}" class="${classNames}" style='display:flex;cursor:pointer' onclick='onClickSong("${escape(JSON.stringify(data[i]))}",${i});'>
                            <i class="fas fa-play mx-1"></i>${title}
                            </h6>`;
                    }
                    document.getElementById('song-list').innerHTML = result 
                })
                .then(()=>playSong())
                .catch(error => console.error(error));
            
        }
        $(document).ready(function(){
            $("#portfolioModal").on('hide.bs.modal', function(){
                onClickClose();
            });
        });

        function onClickClose(){
            pauseSong()
            resetIndex()
        }
        function onClickSong(song,index){
            console.log(song)
            song = JSON.parse(unescape(song))
            loadSong(song)
            playSong()
        }
        function changeModalDetails(vocalist){
            const dir = '../../assets/img/vocalists/' + vocalist.toLowerCase() + '.jpg'
            document.getElementById('vocalist-pic').src = dir
            document.getElementById('vocalist-name').innerHTML = vocalist
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Core theme JS-->
    <script src="../../js/scripts.js"></script>
    <script src="../../js/audio-player.js"></script>
</body>
</html>
