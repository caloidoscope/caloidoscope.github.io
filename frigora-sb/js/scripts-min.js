const SANITY_QUERY=encodeURIComponent('*[_type == "pages" && id == "main"][0]{\n        ...,\n        packages[]->,\n        testimonials[]->,  \n        arrangements[]->{..., "songs": songs[]{title,artist,"url":audioFile.asset->url, "videoUrl":link, isAudioOnly}},\n        vocalists[]->{..., "image":image.asset->, "songs": songs[]{title,artist,"url":audioFile.asset->url}},\n    }'),SANITY_API_ENDPOINT=`https://y5r9a40r.api.sanity.io/v2021-10-21/data/query/production?query=${SANITY_QUERY}`;function changeVideo(e,n){e=getVideoId(e),$(".video-container iframe").remove(),$('<iframe width="420" height="315" frameborder="0" allowfullscreen frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>').attr("src",(e.indexOf("https://www.youtube.com/embed/")>-1?"":"https://www.youtube.com/embed/")+e+"?autoplay=1").appendTo(".video-container"),$("html, body").animate({scrollTop:0},"slow"),(n||n>-1)&&(document.getElementsByClassName("song-active")[0].classList.remove("song-active"),document.getElementById("song-"+n).classList.add("song-active"))}function getVideoId(e){return e=(e=e.replace("https://youtu.be/","")).replace("https://www.youtube.com/watch?v=","")}function stopVideo(){changeVideo("")}window.addEventListener("DOMContentLoaded",(e=>{var n=function(){const e=document.body.querySelector("#mainNav");e&&e.classList.contains("home-nav")&&(0===window.scrollY?e.classList.remove("navbar-shrink"):e.classList.add("navbar-shrink"))};n(),document.addEventListener("scroll",n);document.body.querySelector("#mainNav")&&new bootstrap.ScrollSpy(document.body,{target:"#mainNav",offset:74});const t=document.body.querySelector(".navbar-toggler");[].slice.call(document.querySelectorAll("#navbarResponsive .nav-link")).map((function(e){e.addEventListener("click",(()=>{"none"!==window.getComputedStyle(t).display&&t.click()}))}))}));const musicContainer=document.getElementById("music-container"),playBtn=document.getElementById("play"),prevBtn=document.getElementById("prev"),nextBtn=document.getElementById("next"),audio=document.getElementById("audio"),progress=document.getElementById("progress"),progressContainer=document.getElementById("progress-container"),title=document.getElementById("title"),cover=document.getElementById("cover"),currTime=document.querySelector("#currTime");let songs=["hey","summer","ukulele"],dir="",songIndex=0,isSanity=!1;function resetIndex(){songIndex=0}function initSongs(e,n){dir=e,songs=n,loadSong(songs[songIndex])}function initSongsSanity(e){songs=e,isSanity=!0,loadSong(songs[songIndex])}function loadSong(e){isSanity?(title.innerText=e.title+" - "+e.artist,audio.src=e.url,cover.src="../../assets/songs/img/logo.png",songIndex=songs.map((e=>e.title)).indexOf(e.title)):"object"==typeof e?(title.innerText=e.title+" - "+e.artist,audio.src=`../../assets/songs/audio/${dir}/${e.file}`,cover.src="../../assets/songs/img/logo.png",songIndex=songs.map((e=>e.title)).indexOf(e.title)):(title.innerText=e,audio.src=`../../assets/songs/audio/${dir}/${e}.mp3`,cover.src="../../assets/songs/img/logo.png",songIndex=songs.indexOf(e))}function playSong(){musicContainer.classList.add("play"),playBtn.querySelector("svg.ap").classList.remove("fa-play"),playBtn.querySelector("svg.ap").classList.add("fa-pause"),audio.play(),audio.muted=!1,document.getElementsByClassName("song-active")[0].classList.remove("song-active"),document.getElementById("song-"+songIndex).classList.add("song-active")}function pauseSong(){musicContainer.classList.remove("play"),playBtn.querySelector("svg.ap").classList.add("fa-play"),playBtn.querySelector("svg.ap").classList.remove("fa-pause"),audio.pause()}function prevSong(){songIndex--,songIndex<0&&(songIndex=songs.length-1),loadSong(songs[songIndex]),playSong()}function nextSong(){songIndex++,songIndex>songs.length-1&&(songIndex=0),loadSong(songs[songIndex]),playSong()}function updateProgress(e){const{duration:n,currentTime:t}=e.srcElement,o=t/n*100;progress.style.width=`${o}%`}function setProgress(e){const n=this.clientWidth,t=e.offsetX,o=audio.duration;audio.currentTime=t/n*o}function DurTime(e){const{duration:n,currentTime:t}=e.srcElement;var o;let s=null==t?0:Math.floor(t/60);s=s<10?"0"+s:s,function(e){if(Math.floor(e)>=60)for(var n=1;n<=60;n++)Math.floor(e)>=60*n&&Math.floor(e)<60*(n+1)&&(o=(o=Math.floor(e)-60*n)<10?"0"+o:o);else o=(o=Math.floor(e))<10?"0"+o:o}(t),currTime.innerHTML=s+":"+o;let a=!0===isNaN(n)?"0":Math.floor(n/60);a=a<10?"0"+a:a}playBtn.addEventListener("click",(()=>{musicContainer.classList.contains("play")?pauseSong():playSong()})),prevBtn.addEventListener("click",prevSong),nextBtn.addEventListener("click",nextSong),audio.addEventListener("timeupdate",updateProgress),progressContainer.addEventListener("click",setProgress),audio.addEventListener("ended",nextSong),audio.addEventListener("timeupdate",DurTime);